---
import Layout from "@/layouts/Layout.astro";
import { UserDashboard } from "@/components/user/UserDashboard";

const user = Astro.locals.user;

if (!user) {
  return Astro.redirect("/login?redirect=/dashboard");
}

// Redirect admins to admin dashboard
if (user.role === "admin") {
  return Astro.redirect("/admin/dashboard");
}
---

<Layout title="MÃ³j Dashboard - LearnAI">
  <div class="min-h-screen bg-gradient-to-b from-slate-950 via-slate-900 to-slate-950">
    <div class="container mx-auto px-4 py-12">
      <div class="max-w-7xl mx-auto">
        <!-- Welcome Header -->
        <div class="mb-8">
          <h1 class="text-4xl font-bold text-white mb-2">
            Witaj{user.full_name ? `, ${user.full_name}` : ""}! ðŸ‘‹
          </h1>
          <p class="text-xl text-gray-400">Oto TwÃ³j panel do nauki</p>
        </div>

        <!-- Dashboard Content -->
        <UserDashboard client:load />
      </div>
    </div>
  </div>
</Layout>

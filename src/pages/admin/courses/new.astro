---
import AdminLayout from "@/layouts/AdminLayout.astro";
import { CourseCreator } from "@/components/admin/CourseCreator";

const user = Astro.locals.user;

if (!user) {
  return Astro.redirect("/login");
}

if (user.role !== "admin") {
  return Astro.redirect("/unauthorized");
}
---

<AdminLayout title="Nowy kurs" description="Utwórz nowy kurs edukacyjny z modułami i lekcjami" user={user} currentPath={Astro.url.pathname}>
  <CourseCreator client:load />
</AdminLayout>

---
import Layout from "@/layouts/Layout.astro";
import UserLayout from "@/layouts/UserLayout.astro";
import { CourseDetail } from "@/components/course/CourseDetail";
import { ChatWidget } from "@/components/chat/ChatWidget";

const { id } = Astro.params;
const user = Astro.locals.user;
---

{user && user.role !== "admin" ? (
  <UserLayout 
    title="Szczegóły Kursu" 
    description="Informacje o kursie i możliwość zapisu"
    user={user} 
    currentPath={Astro.url.pathname}
  >
    <ChatWidget client:load contextType="course" contextId={id} />
    <CourseDetail courseId={id} client:load />
  </UserLayout>
) : (
  <Layout title="Szczegóły kursu - LearnAI Platform">
    <div class="min-h-screen bg-gradient-to-b from-slate-950 via-slate-900 to-slate-950">
      <div class="container mx-auto px-4 py-12">
        <div class="max-w-7xl mx-auto">
          <CourseDetail courseId={id} client:load />
        </div>
      </div>
    </div>
  </Layout>
)}
